{#
  Dashboard Home
  
  Main dashboard view with statistics and quick actions
#}

<div class="dashboard-home">
    {# Beta Banner #}
    <div style="
        {%- include 'primitive-books/color-book.twig' with {
            background_color: 'primary',
            color: 'extreme-light'
        } -%}
        {%- include 'primitive-books/spacing-book.twig' with {
            padding: 'lg',
            margin_bottom: 'xl'
        } -%}
        {%- include 'primitive-books/border-book.twig' with {
            border_radius: 'lg'
        } -%}
        {%- include 'primitive-books/layout-book.twig' with {
            display: 'flex',
            align_items: 'center',
            justify_content: 'between'
        } -%}
    ">
        <div>
            <strong>üéâ New Component-Based Dashboard (BETA)</strong>
            <p style="margin: 0; margin-top: 0.25rem; opacity: 0.9;">You're using the refactored dashboard with atomic design components!</p>
        </div>
        <div style="
            {%- include 'primitive-books/color-book.twig' with {
                background_color: 'extreme-light',
                color: 'primary'
            } -%}
            {%- include 'primitive-books/spacing-book.twig' with {
                padding_x: 'md',
                padding_y: 'sm'
            } -%}
            {%- include 'primitive-books/border-book.twig' with {
                border_radius: 'full'
            } -%}
            font-size: 0.875rem;
            font-weight: 600;
            animation: blink 1s infinite;
        ">üöÄ COMPONENT v2.0 ACTIVE</div>
    </div>
    {# Welcome Section #}
    <div class="welcome-section" style="
        {%- include 'primitive-books/spacing-book.twig' with {
            margin_bottom: '2xl'
        } -%}
    ">
        <h1 style="
            {%- include 'primitive-books/typography-book.twig' with {
                font_family: 'playfair-display',
                font_size: 'xx-large',
                font_weight: 'bold'
            } -%}
            {%- include 'primitive-books/color-book.twig' with {
                color: 'base-darkest'
            } -%}
            {%- include 'primitive-books/spacing-book.twig' with {
                margin_bottom: 'sm'
            } -%}
        ">Welcome back, {{ user.first_name|default(user.name) }}!</h1>
        
        <p style="
            {%- include 'primitive-books/typography-book.twig' with {
                font_size: 'large'
            } -%}
            {%- include 'primitive-books/color-book.twig' with {
                color: 'base'
            } -%}
        ">Here's an overview of your community activity.</p>
    </div>
    
    {# Statistics Grid #}
    <div class="dashboard-stats" style="
        {%- include 'primitive-books/spacing-book.twig' with {
            margin_bottom: '3xl'
        } -%}
    ">
        {% include 'component-books/grid-book.twig' with {
            variant: 'stats',
            columns: {sm: 2, md: 2, lg: 4},
            items: [
                {
                    value: stats.total_properties,
                    label: 'Total Properties',
                    icon: 'üè†',
                    color: 'primary',
                    href: '?tab=properties',
                    variant: 'featured'
                },
                {
                    value: stats.active_tickets,
                    label: 'Active Tickets',
                    icon: 'üé´',
                    color: stats.active_tickets > 0 ? 'warning' : 'success',
                    trend: stats.active_tickets > 0 ? {
                        direction: 'up',
                        value: stats.active_tickets,
                        label: 'need attention'
                    } : null,
                    href: '?tab=tickets',
                    variant: 'featured'
                },
                {
                    value: stats.upcoming_meetings,
                    label: 'Upcoming Meetings',
                    icon: 'üìÖ',
                    color: 'info',
                    href: '?tab=groups',
                    variant: 'featured'
                },
                {
                    value: stats.unread_announcements,
                    label: 'Unread News',
                    icon: 'üì¢',
                    color: stats.unread_announcements > 0 ? 'danger' : 'neutral',
                    href: '?tab=announcements',
                    variant: 'featured'
                }
            ],
            item_component: 'component-books/stat-card-book.twig'
        } %}
    </div>
    
    {# Quick Actions #}
    <div class="quick-actions">
        <h2 style="
            {%- include 'primitive-books/typography-book.twig' with {
                font_family: 'playfair-display',
                font_size: 'x-large',
                font_weight: 'semiBold'
            } -%}
            {%- include 'primitive-books/color-book.twig' with {
                color: 'base-darkest'
            } -%}
            {%- include 'primitive-books/spacing-book.twig' with {
                margin_bottom: 'lg'
            } -%}
        ">Quick Actions</h2>
        
        <div style="
            {%- include 'primitive-books/layout-book.twig' with {
                display: 'grid',
                grid_template_columns: 'auto-fit',
                gap: 'lg'
            } -%}
        ">
            {% set quick_actions = [
                {
                    title: 'View Properties',
                    description: 'Manage your properties and view details',
                    icon: 'üè†',
                    href: '?tab=properties',
                    color: 'primary'
                },
                {
                    title: 'Submit Ticket',
                    description: 'Report issues or request maintenance',
                    icon: 'üîß',
                    href: '?tab=tickets&action=new',
                    color: 'secondary'
                },
                {
                    title: 'Community Projects',
                    description: 'View ongoing community initiatives',
                    icon: 'üöÄ',
                    href: '?tab=projects',
                    color: 'primary'
                },
                {
                    title: 'Group Activities',
                    description: 'Join committees and activities',
                    icon: 'üë•',
                    href: '?tab=groups',
                    color: 'secondary'
                }
            ] %}
            
            {% for action in quick_actions %}
                <a href="{{ action.href }}" style="
                    {%- include 'primitive-books/color-book.twig' with {
                        background_color: 'extreme-light',
                        border_color: 'base-light'
                    } -%}
                    {%- include 'primitive-books/border-book.twig' with {
                        border_width: 'thin',
                        border_style: 'solid',
                        border_radius: 'lg'
                    } -%}
                    {%- include 'primitive-books/spacing-book.twig' with {
                        padding: 'xl'
                    } -%}
                    {%- include 'primitive-books/shadow-book.twig' with {
                        box_shadow: 'sm'
                    } -%}
                    {%- include 'primitive-books/animation-book.twig' with {
                        transition_property: 'all',
                        transition_duration: 'base',
                        transition_timing: 'ease'
                    } -%}
                    text-decoration: none;
                    display: block;
                "
                onmouseover="this.style.boxShadow='var(--wp--custom--layout--shadows--md)'; this.style.transform='translateY(-2px)';"
                onmouseout="this.style.boxShadow='var(--wp--custom--layout--shadows--sm)'; this.style.transform='translateY(0)';">
                    
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">{{ action.icon }}</div>
                    
                    <h3 style="
                        {%- include 'primitive-books/typography-book.twig' with {
                            font_size: 'large',
                            font_weight: 'semiBold'
                        } -%}
                        {%- include 'primitive-books/color-book.twig' with {
                            color: action.color
                        } -%}
                        {%- include 'primitive-books/spacing-book.twig' with {
                            margin_bottom: 'sm'
                        } -%}
                    ">{{ action.title }}</h3>
                    
                    <p style="
                        {%- include 'primitive-books/typography-book.twig' with {
                            font_size: 'medium'
                        } -%}
                        {%- include 'primitive-books/color-book.twig' with {
                            color: 'base'
                        } -%}
                        margin: 0;
                    ">{{ action.description }}</p>
                </a>
            {% endfor %}
        </div>
    </div>
    
    {# Member Info #}
    {% if user %}
        <div class="member-info" style="
            {%- include 'primitive-books/spacing-book.twig' with {
                margin_top: '3xl',
                padding: 'xl'
            } -%}
            {%- include 'primitive-books/color-book.twig' with {
                background_color: 'base-lightest',
                border_color: 'base-light'
            } -%}
            {%- include 'primitive-books/border-book.twig' with {
                border_width: 'thin',
                border_style: 'solid',
                border_radius: 'lg'
            } -%}
        ">
            <div style="
                {%- include 'primitive-books/layout-book.twig' with {
                    display: 'flex',
                    align_items: 'center',
                    gap: 'lg'
                } -%}
            ">
                {% include 'element-books/avatar-book.twig' with {
                    name: user.name,
                    size: 'lg',
                    variant: 'user'
                } %}
                
                <div>
                    <div style="
                        {%- include 'primitive-books/typography-book.twig' with {
                            font_weight: 'medium'
                        } -%}
                        {%- include 'primitive-books/color-book.twig' with {
                            color: 'base-darkest'
                        } -%}
                    ">{{ user.name }}</div>
                    
                    <div style="
                        {%- include 'primitive-books/typography-book.twig' with {
                            font_size: 'small'
                        } -%}
                        {%- include 'primitive-books/color-book.twig' with {
                            color: 'base'
                        } -%}
                    ">Member since {{ user.member_since }}</div>
                </div>
                
                <div style="margin-left: auto;">
                    {% for role in user.roles %}
                        {% include 'element-books/badge-book.twig' with {
                            content: role|replace({'_': ' '})|title,
                            variant: role == 'bod' ? 'primary' : (role == 'owner' ? 'success' : 'neutral'),
                            size: 'sm'
                        } %}
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endif %}
</div>